<?xml version="1.0" encoding="utf-8" ?>
<module xmlns="http://www.enova.pl/schema/business_struct.xsd" name="Business" namespace="Soneta.Business.Db"
        versionName="system" versionNumber="120200">

  <using>Soneta.Config</using>
  <using>Soneta.Business.App</using>
  <using>Soneta.Business.Db.Wizard</using>
  <using>Soneta.Business.Runtime</using>
  <using>Soneta.Business.Db.Permissions</using>

  <!-- ====================================================================================== -->
  <!-- TYPY STANDARDOWE -->

  <simpletype name="string">
    <cstype>string</cstype>
    <nullcondition>string.IsNullOrEmpty(value)</nullcondition>
    <null>""</null>
    <csinitializer> = ""</csinitializer>
    <dbfield type="string"/>
  </simpletype>

  <simpletype name="int">
    <cstype>int</cstype>
    <nullcondition>value==0</nullcondition>
    <null>0</null>
    <dbfield type="int"/>
  </simpletype>

  <simpletype name="enum">
    <cstype>int</cstype>
    <nullcondition>((int)value)==0</nullcondition>
    <null>0</null>
    <dbfield type="int"/>
  </simpletype>

  <simpletype name="date">
    <cstype>Date</cstype>
    <nullcondition>value==Date.MinValue</nullcondition>
    <null>Date.MinValue</null>
    <dbfield type="DateTime"/>
  </simpletype>

  <simpletype name="time">
    <cstype>Time</cstype>
    <nullcondition>value==Time.Zero</nullcondition>
    <null>Time.Zero</null>
    <dbfield type="int"/>
  </simpletype>

  <simpletype name="datetime">
    <cstype>DateTime</cstype>
    <nullcondition>value==DateTime.MinValue</nullcondition>
    <null>DateTime.MinValue</null>
    <dbfield type="DateTime"/>
  </simpletype>

  <simpletype name="boolean">
    <cstype>bool</cstype>
    <nullcondition>!value</nullcondition>
    <null>false</null>
    <dbfield type="bool"/>
  </simpletype>

  <simpletype name="double">
    <cstype>double</cstype>
    <nullcondition>value==0.0</nullcondition>
    <null>0.0</null>
    <dbfield type="double"/>
  </simpletype>

  <simpletype name="percent">
    <cstype>Percent</cstype>
    <nullcondition>value==Percent.Zero</nullcondition>
    <null>Percent.Zero</null>
    <dbfield type="decimal"/>
  </simpletype>

  <simpletype name="decimal">
    <cstype>decimal</cstype>
    <nullcondition>value==0.0m</nullcondition>
    <null>0.0m</null>
    <dbfield type="decimal" />
    <attribute>TypeConverter(typeof(Soneta.Business.Design.CurrencyConverter))</attribute>
  </simpletype>

  <simpletype name="guid">
    <cstype>System.Guid</cstype>
    <nullcondition>value==System.Guid.Empty</nullcondition>
    <null>Guid.Empty</null>
    <dbfield type="Guid"/>
  </simpletype>

  <simpletype name="interfaceGroup">
    <nullcondition>value==null</nullcondition>
    <null>null</null>
    <dbfield type="int" />
    <dbfield type="string" postfix="Type" />
  </simpletype>

  <simpletype name="FromTo">
    <cstype>FromTo</cstype>
    <nullcondition>value==FromTo.Empty</nullcondition>
    <null>FromTo.Empty</null>
    <dbfield type="DateTime" postfix="From"/>
    <dbfield type="DateTime" postfix="To"/>
  </simpletype>

  <simpletype name="YearMonth">
    <cstype>YearMonth</cstype>
    <nullcondition>value==YearMonth.Empty</nullcondition>
    <null>YearMonth.Empty</null>
    <dbfield type="int" postfix="Year"/>
    <dbfield type="int" postfix="Month"/>
  </simpletype>

  <simpletype name="Fraction">
    <cstype>Fraction</cstype>
    <nullcondition>value.Value==0</nullcondition>
    <null>Fraction.Zero</null>
    <dbfield type="int" postfix="Num"/>
    <dbfield type="int" postfix="Den"/>
  </simpletype>

  <simpletype name="currency">
    <cstype>Currency</cstype>
    <nullcondition>value==Currency.Zero</nullcondition>
    <null>Currency.Zero</null>
    <dbfield type="decimal" postfix="Value"/>
    <dbfield type="string" postfix="Symbol" />
  </simpletype>

  <simpletype name="doublecy">
    <cstype>DoubleCy</cstype>
    <nullcondition>value==DoubleCy.Zero</nullcondition>
    <null>DoubleCy.Zero</null>
    <dbfield type="double" postfix="Value" />
    <dbfield type="string" postfix="Symbol" />
  </simpletype>

  <simpletype name="text">
    <cstype>MemoText</cstype>
    <nullcondition>value.IsEmpty</nullcondition>
    <null>null</null>
    <csinitializer> = null</csinitializer>
    <dbfield type="memo"/>
  </simpletype>

  <simpletype name="binary">
    <cstype>MemoBin</cstype>
    <nullcondition>value.IsEmpty</nullcondition>
    <null>null</null>
    <csinitializer> = null</csinitializer>
    <dbfield type="binary"/>
  </simpletype>

  <simpletype name="timesec">
    <cstype>TimeSec</cstype>
    <dbfield type="double"/>
    <nullcondition>value==TimeSec.Zero</nullcondition>
    <null>TimeSec.Zero</null>
  </simpletype>

  <!-- ====================================================================================== -->
  <!-- FEATURES -->

  <table name="FeatureDefinition" tablename="FeatureDefs" guided="Root" caption="Definicja cechy"
		config="true" tablecaption="Definicje cechy" namespace="Soneta.Business">
    <key name="ByName" keyunique="true" keyprimary="true">
      <keycol name="TableName"/>
      <keycol name="Name"/>
    </key>
    <col name="TableName" type="string" length="16" required="true" readonly="true"
			category="Ogólne" caption="Klasa" description="Klasa obiektu nadrzędanego"/>
    <col name="Name" type="string" length="30" required="true" important="true"
			category="Ogólne" caption="Nazwa" description="Nazwa cechy"/>
    <col name="Category" type="string" length="30"
			category="Ogólne" caption="Kategoria" description="Kategoria cechy grupująca wartości na formularzu">
      <attribute>Dictionary("Feat.Category")</attribute>
    </col>
    <col name="Description" type="string" length="80"
			category="Ogólne" caption="Opis" description="Opis objaśniający zastosowanie cechy"/>
    <col name="TypeNumber" type="FeatureTypeNumber" important="true"
			category="Ogólne" caption="Typ" description="Typ wartości przechowywanej przez cechę"/>
    <col name="TypeInformation" type="string" length="30" modifier="internal"/>
    <col name="ReadOnlyMode" type="FeatureReadOnlyMode"
			category="Ogólne" caption="Tylko odczyt" description="Określa warunki edycji cechy z formularza lub listy."/>
    <col name="InitValueStr" type="string" length="80" modifier="internal"
			category="Ogólne" description="Wartość w formacie tekstowym inicjująca cechę podczas dodawania zapisu."/>

    <col name="Algorithm" type="FeatureAlgorithm"
			category="Algorytm" caption="Algorytm" description="Rodzaj algorytmu wyliczenia cechy"/>
    <col name="ValueRequired" type="boolean"
			category="Algorytm" caption="Wartość wymagana" description="Wymagane jest wprowadzenie wartości tej cechy"/>
    <col name="Precision" type="int"
			category="Algorytm" description="Prezycja przechowywania liczb zmiennoprzecinkowych"/>
    <col name="ValueFrom" type="string" length="80"
			category="Algorytm" description="Minimalna akceptowalna wartość. Wartość pusta oznacza brak ograniczeń"/>
    <col name="ValueTo" type="string" length="80"
			category="Algorytm" description="Maksymalna akceptowalna wartość. Wartość pusta oznacza brak ograniczeń"/>
    <col name="TextLength" type="int"
			category="Algorytm" description="Maksymalny rozmiar wprowadzanego tekstu"/>
    <col name="Code" type="text"
			category="Algorytm" description="Algorytm (C#) odczytu i wyliczenia cechy">
      <attribute>ControlEdit(ControlEditKind.Algorithm)</attribute>
    </col>
    <col name="ValueFilter" type="string" length="255"
			category="Algorytm" description="Wyrażenie filtrujące poprawne wartości dla cechy. Filtrowanie wartości obiektowych."/>

    <col name="Group" type="boolean"
			category="Ogólne" caption="Grupa" description="Cecha wykorzystywana do grupowania wartości w drzewie po lewej strony listy"/>
    <col name="History" type="boolean"
			category="Ogólne" caption="Historyczna" description="Wskazuje na historyczność wartości cechy"/>
    <col name="StrictDictionary" type="boolean"
			category="Ogólne" caption="Tylko słownik" description="Cecha może przyjmować wartości tylko ze slownika"/>
    <col name="Dictionary" type="string" length="14"
			category="Ogólne" caption="Nazwa słownika" description="Nazwa słownika wartości do wyboru">
      <attribute>Dictionary("Feature.Diction")</attribute>
    </col>

    <col name="Info" type="string" length="2" description="Pole tymczasowe. Nie używać."/>

  </table>

  <enum name="FeatureTypeNumber"/>
  <enum name="FeatureAlgorithm"/>
  <enum name="FeatureReadOnlyMode"/>

  <!-- ====================================================================================== -->
  <!-- KONFIGURACJA -->

  <!-- CFG NODE -->
  <enum name="CfgNodeType"/>
  <table name="CfgNode" tablename="CfgNodes" guided="Root" config="true" caption="Konfiguracja" namespace="Soneta.Config">
    <col name="Parent" type="CfgNode" category="Node"
			relname="Config Node parent"
			reldefault="true"
			children="Subkeys"
			keyprimary="true"
			keyunique="true"
		>
      <keycol name="Name"/>
    </col>
    <col name="Name" type="string" length="40" required="true" category="Node" />
    <col name="Type" type="CfgNodeType" category="Node" />
  </table>

  <!-- CFG ATTRIBUTE -->
  <enum name="AttributeType"/>
  <table name="CfgAttribute" tablename="CfgAttributes" config="true" caption="Dane konfiguracji" namespace="Soneta.Config">
    <col name="Node" type="CfgNode" required="true" category="Attribute"
			relname="Config Attribute Node"
			children="Attributes"
			keyprimary="true"
			keyunique="true"
			delete="cascade"
			relguided="inner"
		>
      <keycol name="Name"/>
    </col>
    <col name="Name" type="string" length="40" category="Attribute" />
    <col name="Type" type="AttributeType" category="Attribute" />
    <col name="StrValue" type="string" length="255" category="Attribute" />
    <col name="MemoValue" type="text" category="Attribute" />
  </table>

  <!-- ====================================================================================== -->
  <!-- OPERATORZY -->

  <table name="Operator" tablename="Operators" guided="Root" config="true" namespace="Soneta.Business.App">

    <interface>IŹródłoPowiązaniaStrukturyOrganizacyjnej</interface>
    <interface>ITaskUser</interface>
    <interface>IAuthorised</interface>

    <key name="ByName" keyunique="true" keyprimary="true">
      <keycol name="Name" />
    </key>
    <key name="ByTrusted">
      <keycol name="Trusted" />
    </key>

    <col name="Name" type="string" length="20" required="true" category="Ogólne" important="true"
			caption="Kod" description="Unikalny kod operatora wymagany podczas logowania się do bazy.">
      <verifier onadded="true" name="Operator.NameVerifier"/>
    </col>
    <col name="Password" type="string" length="32" required="true" modifier="protected" specialaccess="true" />
    <col name="PromptPassword" type="string" length="40" category="Logowanie" specialaccess="true"
			caption="Podpowiedź hasła" description="Informacja podpowiadająca użytkownikowi jakie ma hasło dostępu."/>
    <col name="Trusted" type="string" length="32" category="Logowanie"
			caption="Logowanie zintegrowane" description="Nazwa operatora zintegrowanego, który może się logować na to konto."/>

    <col name="Locked" type="boolean" category="Ogólne"
			caption="Zablokowany" description="Określa, czy konto jest aktualnie zablokowane."/>

    <col name="FullName" type="string" length="60" category="Ogólne" specialaccess="true"
			caption="Nazwa" description="Imię i nazwisko operatora."/>
  </table>

  <table name="OperatorEx" tablename="OperatorsEx" caption="Dodatkowe ustawienia operatora">
    <key name="ByProvider">
      <keycol name="ExternalProvider" />
      <keycol name="ExternalProviderUserId" />
    </key>

    <col name="Operator" type="Operator" required="true" readonly="true"
			relname="Ustawienia operatora"
			keyprimary="true"
			keyunique="true"
			delete="cascade"
			relguided="inner"
		>
    </col>
    <col name="AllowConversion" type="boolean" category="Ogólne"
		    caption="Dozwolona konwersja" description="Określa operatora, który może wykonywać konwersję bazy danych."/>
    <col name="AllowOperatorsManagment" type="boolean" category="Ogólne"
		    caption="Edycja operatorów" description="Umożliwia operatorowi zarządzanie innymi operatorami."/>
    <col name="AllowDevelopment" type="boolean" category="Ogólne"
		    caption="Funkcje programistyczne" description="Zezwala na zarządzanie funkcjami programistycznymi."/>
    <col name="AllowEnova365" type="boolean" category="Ogólne"
		    caption="Funkcje enova365" description="Zezwala na dostęp do enova365."/>
    <col name="ClientLicenceNumber" type="string" length="8" category="Licencja"
		    caption="Numer licencji klienta" description="Umożliwia operatorowi logowanie na licencji innej niż podstawowa licencja bazy danych."/>
    <col name="PasswordHistory" type="text" category="Autentykacja" modifier="internal" specialaccess="true"
		    caption="Historia haseł" description="Standardowy oddział, który jest źródłem praw operatora."/>
    <col name="InvalidLoginCounter" type="int" category="Autentykacja" readonly="set" specialaccess="true"
		    caption="Niepoprawne logowanie" description="Liczba ostatnich błędnych logowań na konto operatora."/>
    <col name="RecentInvalidLogin" type="datetime" category="Autentykacja" readonly="set" specialaccess="true"
		    caption="Ostatnie niepoprawne logowanie" description="Czas ostatniego niepoprawnego logowania."/>
    <col name="RecentPasswordChange" type="datetime" category="Autentykacja" readonly="set" specialaccess="true"
		    caption="Ostatnia zmiana hasła" description="Czas ostatniej zmiany hasła przez operatora."/>
    <col name="AllowExternalProviders" type="boolean" category="Ogólne"
		    caption="Funkcje enova365" description="Zezwala na dostęp do enova365 za pośrednictwem loginów zewnętrznych (facebook, google etc.)"/>
    <col name="ExternalProvider" type="string" length="20" category="Ogólne" readonly="set" specialaccess="true"
		    caption="Nazwa zewnętrznego provider'a" description="Nazwa zewnętrznego providera, który odpowiada za wstępną autentykacje użytkownika."/>
    <col name="ExternalProviderUserId" type="string" length="100" category="Ogólne" readonly="set" specialaccess="true"
		    caption="Identyfikator użytkownika dla zewnętrznego provider'a" description="Identyfikator użytkownika zewnętrznego providera, z którym powiązane jest konto."/>
    <col name="IsSupervisor" type="boolean" category="Ogólne"
		    caption="Przełożony" description="Czy operator jest przełożonym."/>
  </table>

  <table name="Entitle" tablename="Entitles" guided="Root" config="true"
         caption="Uprawnienie" tablecaption="Uprawnienia" namespace="Soneta.Business.App">
    <key name="ByName" keyunique="true">
      <keycol name="Name" />
    </key>

    <col name="Parent" type="Entitle"
			relname="Uprawnienia nadrzędne"
         children="Children"
			keyprimary="true"
			keyunique="true">
      <keycol name="Name"/>
      <attribute>Context(Required=false)</attribute>
    </col>
    <col name="Name" type="string" length="20" required="true" category="Ogólne" important="true"
         caption="Kod" description="Unikalny kod oddziału praw."/>
    <col name="FullName" type="string" length="60" category="Ogólne"
         caption="Nazwa" description="Pełna nazwa oddziału praw."/>

    <col name="CurrentOddzial" type="IOddzialFirmy"
      description="Aktualny oddział firmy przypisany do uprawnienia."
      relname="Aktualny oddział firmy" />
  </table>

  <table name="OperatorEntitle" tablename="OperatorEntitles" name8="OperEnti" caption="Uprawnienia operatora" config="true">
    <col name="Entitle" type="Entitle" required="true"
      description="Uprawnienia przypisane operatorowi."
			relname="Uprawnienia operatora"
			keyprimary="true"
			keyunique="true"
			delete="cascade"
			children="Operators"
		>
      <keycol name="Operator" />
    </col>
    <col name="Operator" type="Operator" required="true"
      description="Operator przypisany do uprawnień."
			relname="Operator uprawnień"
			keyunique="true"
			delete="cascade"
			relguided="inner"
			children="Entitles"
		>
      <keycol name="Entitle" />
    </col>
  </table>

  <table name="EntitleRole" tablename="EntitleRoles" name8="EntiRole" caption="Role uprawnienia">
    <col name="Entitle" type="Entitle" required="true" readonly="true"
      description="Uprawnienia, którym dana rola została przypisana."
			relname="Role uprawnień"
			keyprimary="true"
			keyunique="true"
			delete="cascade"
			relguided="inner"
			children="Roles"
		>
      <keycol name="RoleGuid" />
    </col>
    <col name="RoleGuid" type="guid" required="true" readonly="true"/>
  </table>

  <table name="Right" tablename="Rights" caption="Prawo dostępu">
    <col name="Entitle" type="Entitle" required="true" readonly="true"
      description="Uprawienia, którym dane prawo zostało przypisane."
      relname="Prawa uprawnień"
      keyprimary="true"
      delete="cascade"
      relguided="inner"
      children="Rights"
		/>
    <col name="Source" type="IRightsSource" required="true" readonly="true" name12="Src"
      description="Dane, dla których prawo jest określone."
			relname="Żródło praw"
			delete="cascade"
		>
      <keycol name="Entitle" />
    </col>
    <col name="ReadOnlyRight" type="boolean" readonly="true"
       description="Określono prawo tylko do przeglądania danych. Nie można modyfikować zapisów." />
  </table>

  <interface name="IRightsSource"/>
  <interface name="IOddzialFirmy"/>

  <!-- ====================================================================================== -->
  <!-- SŁOWNIKI -->

  <table name="DictionaryItem" tablename="Dictionary" name8="Diction" guided="Root" caption="Słownik" >
    <!--<key name="ByCategory" keyprimary="true">
      <keycol name="Category"/>
      <keycol name="Lp"/>
    </key>-->
    <col name="Parent" type="DictionaryItem"
      description="Określa nadrzędny obiekt słownikowy"
			relname="Parent dictionary"
			delete="cascade"
      keyprimary="true" />
    <col name="DataContext" type="IOddzialFirmy"
      description="Oddział firmy będący kontekstem wyboru danych ze słownika."
      relname="Kontekst słownika">
      <keycol name="Category"/>
      <keycol name="Lp"/>
    </col>
    <col name="Category" type="string" length="16" required="true" readonly="true" caption="Nazwa słownika"
			description="Nazwa słownika, do którego należy dany element." />
    <col name="Lp" type="int" readonly="true" batchfield="false"
			description="Określa kolejność występowania elementów w słowniku." />
    <col name="Value" type="string" length="255" required="true" caption="Wartość"
			description="Tekst będący pojedynczym elementem słownika." />
  </table>

  <!-- ====================================================================================== -->
  <!-- SYSTEMOWE -->

  <table name="LockInfo" tablename="LockInfos" name8="LckInfos" guided="None" caption="Edytowane zapisy">
    <key name="BySession" keyprimary="true">
      <keycol name="Instance"/>
      <keycol name="SessionID"/>
    </key>
    <col name="Instance" type="guid" required="true" readonly="true"/>
    <col name="SessionID" type="int" required="true" readonly="true"/>
    <col name="Action" type="LockInfoAction" required="true" readonly="true"/>
    <col name="RecordTable" type="string" length="16" readonly="true"/>
    <col name="RecordID" type="int" readonly="true"/>
    <col name="OperatorID" type="int" readonly="true"/>
    <col name="ModificationTime" type="datetime" required="true" readonly="true" />
  </table>

  <enum name="LockInfoAction"/>

  <table name="SystemInfo" tablename="SystemInfos" name8="SysInfos" guided="None" caption="Informacja systemowa">
    <key name="ByIdent" keyprimary="true" keyunique="true">
      <keycol name="Ident"/>
    </key>
    <col name="Ident" type="SysInfoIdentifier" required="true" readonly="true"/>
    <col name="Value" type="string" length="500"/>
    <col name="Data" type="text" />
  </table>

  <enum name="SysInfoIdentifier"/>

  <table name="ChangeInfo" tablename="ChangeInfos" name8="ChgInfos" guided="None" timestamp="false" caption="Historia zmian">
    <key name="ByTime" keyprimary="true" >
      <keycol name="Time"/>
    </key>
    <key name="BySource" >
      <keycol name="SourceTable"/>
      <keycol name="SourceGuid"/>
      <keycol name="Time"/>
    </key>
    <col name="Operator" type="Operator" required="true" readonly="true"
			description="Operator, który był zalogowany do systemu, który utworzył to zgłoszenie."
			relname="Zmiany operatora"
			delete="cascade"
		>
      <keycol name="Time"/>
    </col>
    <col name="WebUser" type="string" length="16" caption="Operator enovaNet" readonly="true"
			description="Operator enovaNet zalogowany do systemu." />
    <col name="SourceTable" type="string" length="16" readonly="true" caption="Tabela źródła"
			description="Nazwa tabeli bazy danych zawierającej zapis, do którego zostało wywołane zgłoszenie." />
    <col name="SourceGuid" type="guid" readonly="true" caption="Guid źródła"
			description="Unikalny identyfikator zapisu, do którego zostało wywołane zgłoszenie." />
    <col name="Type" type="ChangeInfoType" required="true" readonly="true" caption="Typ"
			description="Typ zgłoszenia określający powód jego zgłoszenia." />
    <col name="Time" type="datetime" required="true" readonly="true" caption="Dzień"
			description="Data wystąpienia zgłoszenia." />
    <col name="Info" type="string" length="80" caption="Informacje" readonly="true"
			description="Dodatkowa informacja o danym zgłoszeniu." />
    <col name="Data" type="text" caption="Dane dodatkowe" readonly="true"
			description="Dodatkowa informacja o danym zgłoszeniu." />
    <col name="NoteToChange" type="text" caption="Uwagi do zmian" readonly="true"
			description="Uwagi do zmian wymagane w metryce dokumentów." />
  </table>

  <enum name="ChangeInfoType"/>

  <!-- ====================================================================================== -->
  <!-- REPLICATION -->

  <table name="Replication" tablename="Replications" caption="Wyślij/odbierz" tablecaption="Wyślij/odbierz"
		guided="Root" config="true">

    <key name="ByName" keyunique="true" keyprimary="true">
      <keycol name="Name"/>
    </key>

    <col name="Name" type="string" length="80" required="true" caption="Nazwa" category="Ogólne"
			description="Nazwa definicji replikacji wyświetlana np w menu programu." />

    <col name="Locked" type="boolean" caption="Blokada" category="Ogólne"
			description="Chwilowe lub stałe zablokowanie tej replikacji danych." />

    <col name="Device" type="ReplicationDevice" required="true" caption="Wysłać do" category="Połączenie"
			description="Określa urządzenie, dokąd i skąd będą wysyłane i odbierane dane przy pomocy tej replikacji." />

    <col name="DeviceConnection" type="string" length="255" caption="Nazwa celu" category="Połączenie"
			description="Opis określający połączenie z urządzeniem (nazwa pliku, nazwa serwera, itp)." />

    <col name="CodePage" type="string" length="30" caption="Strona kodowa" category="Połączenie"
			description="Strona kodowa danych wysyłanych do źródła repliakcji." />

    <col name="Export" type="boolean" category="Połączenie" caption="Eksport"
			description="Pozwala na eksportowanie (wysyłanie) danych do zadanego źródła." />

    <col name="Import" type="boolean" category="Połączenie"
			description="Pozwala na importowanie (odbieranie) danych z zadanego źródła." />

    <!-- Schedule -->

    <col name="RefreshPeriod" type="time" caption="Częstość eksportu" category="Harmonogram"
			description="Czas, co jaki następuje wysyłanie danych do celu. Czas 0, brak odświeżania okresowego." />

    <col name="RefreshFrom" type="time" caption="Od" category="Harmonogram"
			description="Godzina, od której może następować automatyczna replikacja danych." />

    <col name="RefreshTo" type="time" caption="Do" category="Harmonogram"
			description="Godzina, do której może następować automatyczna replikacja danych." />

    <col name="Manual" type="boolean" caption="Z menu" category="Harmonogram"
			description="Pozwala na ręczne wywołanie replikacji z okna programu 'Wyślij/Odbierz'." />

    <col name="ForList" type="boolean" caption="Z menu" category="Harmonogram"
			description="Pozwala na ręczne wywołanie replikacji z listy zaznaczonych zapisów." />

  </table>


  <table name="ReplicationItem" tablename="ReplicationItems" caption="Element wyślij/odbierz" tablecaption="Elementy wyślij/odbierz"
		config="true" name8="RepItems">

    <col name="Type" type="ReplicationType" selector="true" required="true" readonly="true" category="Ogólne" caption="Typ"
			description="Określa rodzaj replikowanych danych (algorytm)." />

    <col name="Replication" type="Replication" readonly="true" required="true" caption="Definicja"
			description="Definicja, do której należy ten element wyślij/odbierz"
			children="Items"
			relname="Elementy replikacji"
			keyunique="true"
			relguided="inner"
			delete="cascade"
			keyprimary="true"
			keyclass="Lp" keyclasscol="Number"
		/>

    <col name="Number" type="int" required="true" category="Ogólne" caption="Lp"
			description="Liczba porządkowa elementu replikacji w definicji." />

    <col name="Fields" type="text" caption="Pola"
			description="Zawiera dodatkowe informacje o replikacji danych." />

    <col name="Filter" type="string" length="255" caption="Filtr"
			description="Dodatkowy filtr danych, które mają być replikowane." />

  </table>

  <table name="ReplicationInfo" tablename="ReplicationInfos" caption="Informacja o wyślij/odbierz" tablecaption="Informacje o wyślij/odbierz"
		name8="RepInfos" guided="None">

    <col name="Replication" type="Replication" readonly="true" required="true" caption="Definicja"
			description="Definicja, do której należy informacja wyślij/odbierz"
			relname="Informacje replikacji"
			delete="cascade"
			keyprimary="true"
		>
      <keycol name="Time"/>
      <keycol name="ReplicationGuid"/>
    </col>

    <col name="Operator" type="Operator" required="true" readonly="true"
			description="Operator, który wykonał operacje wyślij/odbierz."
			relname="Operator informacji replikacji"
		>
      <keycol name="Time"/>
      <keycol name="ReplicationGuid"/>
    </col>

    <col name="ReplicationGuid" type="guid" readonly="true" caption="Kolejna replikacja" name12="ReplGuid"
			description="Unikalny identyfikator wykonanej replikacji danych (dla każdej operacji wyślij/odbierz jest inny)." />

    <col name="Time" type="datetime" required="true" readonly="true" caption="Dzień/czas"
			description="Data i czas wykonania wyślij/odbierz." />

    <col name="Description" type="string" length="255" caption="Opis" readonly="true"
			description="Tekstowy opis błędu, który wystąpił." />

    <col name="Data" type="text" caption="Dane"
			description="Dane, dla któych wystąpił błąd replikacji." />

  </table>

  <enum name="ReplicationDevice"/>
  <enum name="ReplicationType"/>
  <enum name="GuidMapType"/>

  <!-- Uniwersalny link pomiedzy dwoma dowolnymi rekordami GUID'owanymi -->
  <table name="GuidMap" tablename="GuidMaps" guided="None">
    <!-- unique + To zamiast unikalności opartej o ID -->
    <key name="WgFrom" keyunique="true" keyprimary="true">
      <keycol name="From"/>
      <keycol name="Type"/>
    </key>
    <key name="WgTo">
      <keycol name="To"/>
      <keycol name="Type"/>
    </key>
    <col name="From" type="guid" required="true" readonly="set"/>
    <col name="To" type="guid" name12="Tox" required="true" readonly="set"/>
    <col name="Type" type="GuidMapType" required="true" readonly="true"/>
    <col name="Tag" type="int"/>
  </table>

  <!-- ====================================================================================== -->
  <!-- TASKS -->

  <enum name="TaskOperatorType"/>
  <enum name="TaskProgress"/>
  <enum name="ActionType" />
  <enum name="ActionRunAt" />
  <enum name="NotificationType" />
  <enum name="DeleteOnRealized" />
  <interface name="IGuidedRow"/>

  <interface name="IWFDefinition" />
  <interface name="IOGSchema" />
  <interface name="IWFDefItem" />
  <interface name="IWFFeatureDefs" />
  <table name="TaskDefinition" tablename="TaskDefs" caption="Definicja zadania" tablecaption="Definicje zadań"
		guided="Root" config="true">

    <key name="ByName" keyunique="true" keyprimary="true">
      <keycol name="TableName"/>
      <keycol name="Name"/>
    </key>

    <key name="ByTableName">
      <keycol name="TableName"/>
    </key>

    <col name="TableName" type="string" length="16" required="true" readonly="true" category="Ogólne" caption="Klasa" description="Klasa obiektu nadrzędanego.">
      <verifier name="TaskDefinition.IsAutoActionProperVerifier" onadded="true" />
    </col>
    <col name="Name" type="string" length="80" required="true" description="Ogólne" />
    <col name="FormatedName" type="string" length="80" required="true" description="Ogólne" />
    <col name="Description" type="string" length="255" category="Ogólne" caption="Opis" description=""/>
    <col name="Locked" type="boolean" category="Ogólne" caption="Zablokowany" description="">
      <verifier name="TaskDefinition.LockedVerifier" onadded="true" />
    </col>
    <col name="IsNotification" type="boolean" category="Ogólne" description=""/>
    <col name="NotificationType" type="NotificationType" category="Ogólne" description=""/>
    <col name="NotificationTime" type="time" category="Ogólne" description=""/>
    <col name="AllowModification" type="boolean" category="Ogólne" description=""/>
    <col name="IsVisibleInScheduler" type="boolean" category="Ogólne" description="Określa czy zadanie jest widoczne na liście" />
    <col name="Algorithm" type="boolean" category="Algorytm" description=""/>
    <col name="MultiTask" type="boolean" category="Ogólne" description=""/>
    <col name="Code" type="text" category="Algorytm" description="">
      <verifier name="TaskDefinition.IsStartAllowedVerifier" onadded="true" />
      <verifier name ="TaskDefinition.FormsTokenCodeVerifier" onadded="true" />
      <verifier name ="TaskDefinition.RowOrRowInternalTokenCodeVerifier" onadded="true" />
    </col>
    <col name="OperatorType" type="TaskOperatorType" category="Algorytm" description=""/>
    <col name="Operator" type="Operator" category="Algorytm" description=""/>
    <col name="ActionType" type="ActionType" category="Algorytm" description=""/>
    <col name="ActionRunAt" type="ActionRunAt" category="Algorytm" description="">
      <verifier name="TaskDefinition.IsAutoActionProperVerifier" />
    </col>
    <col name="RoleGuid" type="guid" category="Ogólne" description=""/>
    <col name="DeleteOnRealized" type="DeleteOnRealized" category="Ogólne" description="Określa zachowanie taska przy realizacji."/>

    <!--[11604][8.0][CRM 8.0]: Wizardy a Taski Etap 3-->
    <col name="WizardDefinition"
         type="WizardDefinition"
         category="Kreator"
         relname="TaskDefinitions"
         children="TaskDefinitions"
         description="Definicja kreatora powiązana z definicją zadania"
         delete="cascade"
		/>

    <!--[14683][8.4][Workflow 8.4]: Opis na kreatorze z definicji taska-->
    <col name="WizardInstruction" type="text" category="Kreator" caption="Instrukcja dla definicji kreatora" description="Określa instrukcję dla definicji kreatora"/>

    <!--[13609][8.3][Systemowe 8.3]: Warunkowe kompilowanie tasków w enova.NET-->
    <col name="SonetaExplorer" type="boolean" category="Algorytm" description="Określa czy kompilacja kodu definicji zadania może być wykonana tylko w SonetaExplorer">
      <verifier name ="TaskDefinition.FormsTokenCodeVerifier" onadded="true" />
      <verifier name ="TaskDefinition.RowOrRowInternalTokenCodeVerifier" onadded="true" />
      <verifier name ="TaskDefinition.SchedulerReferenceVerifier" onadded="true" />
    </col>

    <!--[13062][8.3][CRM 8.3]: Workflow-->
    <col name="InWorkflowUse" type="boolean" category="Workflow" description="Określa czy definicja jest widoczna tylko jako kontrolka w toolbox definicji workflow." />
    <col name="MakeParentReadonly" type="boolean" category="Workflow" caption="Tylko do odczytu" description="Czy obiekt powiązany z definicją (Parent dla zadania) ma być blokowany do edycji poza Workflow"/>
    <col name="IsStart" type="boolean" category="Workflow" caption="Element startowy" description="Czy definicja zadania jest początkiem procesu workflow">
      <verifier name="TaskDefinition.IsStartAllowedVerifier" onadded="true" />
      <verifier name="TaskDefinition.IsAutoActionProperVerifier" />
    </col>
    <col name="WFDefinition" type="IWFDefinition" category="Workflow" caption="Definicja workflow" description="Określa definicję wokflow">
      <verifier name="TaskDefinition.IsAutoActionProperVerifier" />
      <verifier name="TaskDefinition.ConnectionsVerifier" />
    </col>
    <col name="WFDefItem" type="IWFDefItem" category="Workflow" caption="Definicja elementu workflow" description="Określa definicję elementu wokflow"/>
    <col name="OGSchema" type="IOGSchema" category="Workflow" caption="Definicja schematu generatora" description="Określa definicję schematu generatora obiektów"/>
    <col name="InitParent" type="boolean" category="Workflow" caption="Inicjacja zadania wierszem generatora" description="Określa czy inicjować zadanie wierszem utworzonym przez generator obiektów"/>
    <col name="XML" type="text" category="Graf workflow" caption="XML opisujący rozmiar i położenie węzła" description="XML opisujący rozmiar i położenie węzła"/>

    <!--[15000][9.1][Workflow 9.1]: Pojedyncza instancja taska w procesie - task typu scalenie rozwidlenia-->
    <col name="IsSingleInstance" type="boolean" category="Workflow" caption="Złączenie" description="Określa czy definicja jest typu złączenie" />

    <!--[17035][9.3][Workflow 9.3]: Wrzucić do 9.3 zmiany związane z schedule - cofnięte do wersji 9.2-->
    <col name="OverdueHandling" type="boolean" category="Schedule" caption="Obsługa eskalacji" description="Określa obsługiwana jest eskalacja" />
    <col name="OverdueServiceType" type="TaskDefinition" category="Schedule" caption="Sposób obsługi eskalacji" description="Określa sposób obsługi eskalacji">
      <verifier name="TaskDefinition.OverdueVerifier" onadded="true" />
    </col>

  </table>

  <table name="TaskTrigger" tablename="TaskTriggers" caption="Wyzwalacze tasków" tablecaption="Kolekcja klas mających wpływ na przetworzenie taska" config="true">

    <col name="TaskDefinition" type="TaskDefinition"  required="true" category="Ogólne"
          description="Definicja zadania, do której jest przypisana klasa"
          children="TaskTriggers"
          relname="Definicja zadania"
          delete="cascade"
          relguided="inner"
          keyprimary="true"
			/>

    <key name="ByTableName">
      <keycol name="TableName"/>
    </key>

    <col name="TableName" type="string" length="16" setonlynull="true" required="true" category="Ogólne" caption="Klasa" description="Klasa obiektu nadrzędanego."/>
    <col name="Code" type="text" category="Ogólne" description="Kod metody która zwraca obkiekt do którego utworzona jest definicja zadania."/>
  </table>

  <enum name="OperatorRoleType" />
  <interface name="ITaskUser" />
  <interface name="IWFWorkflow" />
  <interface name="IWFTransition" />
  <table name="Task" tablename="Tasks" caption="Zadanie" tablecaption="Zadania" guided="Root">

    <key name="WgTaskDefAndGuidedRow">
      <keycol name="Definition" />
      <keycol name="Parent"/>
      <keycol name="TaskUser"/>
    </key>

    <key name="WgName" >
      <keycol name="Name"/>
    </key>

    <col name="Parent" type="IGuidedRow" readonly="set"
			keyprimary="true"
			delete="notify"
			description="" relname="Parents">
      <keycol name="Start"/>
    </col>

    <col name="Definition" type="TaskDefinition" readonly="set" required="true"
			description=""
			relname="Definicja zadania">
      <keycol name="Start"/>
    </col>

    <col name="OperatorRoleType" type="OperatorRoleType" category="Ogólne" description="Określa czy zadanie przypisane jest do operatora czy do roli czy innego obiektu."/>

    <col name="Operator" type="Operator"
				relname="Zadanie operatora"
				delete="cascade"
				description="Operator do którego jest przypisany task.">
      <keycol name="Start"/>
    </col>

    <col name="RoleGuid" type="guid" category="Ogólne" description="Giud roli do której przypisane jest zadania." />
    <col name="TaskUser" type="ITaskUser" category="Ogólne" description="Określa obiekt który jest właścicielem zadania." />

    <col name="Start" type="datetime" description="Data i czas rozpoczęcia zadania.">
      <verifier name="Task.TaskPeriodVerifier" onadded="false"/>
    </col>

    <col name="End" type="datetime" description="Data i czas zakończenia zadania.">
      <verifier name="Task.TaskPeriodVerifier" onadded="false"/>
    </col>

    <col name="Notification" type="datetime" description=""/>
    <col name="Progress" type="TaskProgress" description=""/>
    <col name="Name" type="string" length="80" required="true" description="Krótka nazwa zadania." />
    <col name="Description" type="text" category="Ogólne" caption="Opis" description="Opis zadania."/>
    <col name="Modified" type="boolean" category="Ogólne" description=""/>
    <col name="ValidFrom" category="Ogólne" type="date" description="Określa datę od której task staje się ważny" />

    <col name="WizardDefinition"
         type="WizardDefinition"
         category="Kreator"
         relname="Tasks"
         description="Definicja kreatora powiązana z zadaniem"
         delete="cascade" />
    
    <col name="WFWorkflow" type="IWFWorkflow" category="Workflow" caption="Workflow" description="Określa element wokflow" readonly="set" />
    <col name="WFTransition" type="IWFTransition" category="Workflow" caption="Tranzycja" description="Określa tranzycję dla zadania" />
    <col name="EditInWorkflow" type="boolean" category="Workflow" caption="Edycja wiersza w workflow" description="Określa czy powiązany z zadaniem wiersz może być edytowany poza workflow" readonly="set"/>
    <col name="TakeOverOperator" type="Operator" relname="Zadanie operatora przejmującego" category="Ogólne" description="operator, który przejmuje zadanie"/>

  </table>


  <table name="TaskLinkedObj" tablename="TaskLinkedObjs" caption="Wielowidoczność tasków" tablecaption="Kolekcja obiektów do których task będzie podpięty.">
    <col name="Task" type="Task" required="true" category="Ogólne" caption="Obiekt taska" description="Task do którego podpinane są obiekty."
         delete="cascade"
         children="LinkedObjects"
         relname="Obiekty przypięte do taska"
         />
    <col name="LinkedObject" type="IGuidedRow" required="true" category="Ogólne" caption="Obiekt typu GuidedRow" description="Obiekt typu GuidedRow podpięty do taska."
          keyprimary="true" delete="notify"
         />
    <col name="IsParent" type="boolean" category="Ogólne"  caption="" description="Określa czy obiekt podpięty do taska jest obiektem głównym taska."/>
  </table>


  <!-- ====================================================================================== -->
  <!-- ATTACHMENTS -->

  <enum name="AttachmentType"/>
  <enum name="SubTypeType"/>
  <interface name="IAttachmentFolder"/>

  <table name="Attachment" tablename="Attachments" caption="Załącznik" tablecaption="Załączniki" guided="None">

    <interface>IPermissionClient</interface>

    <col name="Parent" type="IGuidedRow" readonly="set" keyunique="true" caption="Nadrzędny"
			  keyprimary="true"
        relright="true"
			  delete="cascade"
			  description="Zapis, do którego przypisany jest załącznik.">
      <keycol name="Type"/>
      <keycol name="Name"/>
    </col>
    <col name="Type" type="AttachmentType" caption="Typ" readonly="true" required="true"
      description="Określa zastosowanie danego załącznika."/>
    <col name="Name" type="string" length="100" required="true" caption="Nazwa" modifier="public virtual"
			description="Nazwa załącznika.">
      <verifier name="AttachmentVerifier" onadded="true"/> </col>
    <col name="Description" type="string" length="255" caption="Opis"
			description="Opis zawartości załącznika." />

    <col name="Data" type="binary" caption="Dane" modifier="internal"
			description="Binarna wartość przechowywanego pliku."/>
    <col name="IsDataCompressed" type="boolean" caption="Dane skompresowane" readonly="set"
			description="Określa, czy przechowywane dane są w wersji skompresowanej."/>
    <col name="IsDefault" type="boolean" caption="Standardowy obrazek" 
			description="Określa, czy obrazek ma być standardowo użyty do reprezentacji obiektu."/>
    <col name="Send" type="boolean" caption="Wysyłaj w mailu"
			description="Określa, czy załącznik powinien być dołączany do wysyłanego maila."/>
    <col name="Link" type="string" length="255" caption="Odnośnik" modifier="public virtual"
			description="Ścieżka dostępu do wskazywanego pliku."/>

    <col name="Modified" type="datetime" readonly="set" caption="Data modyfikacji"
      description="Data ostatniej modyfikacji załącznika"/>

    <col name="IconX" type="int" caption="X"
			description="Współrzędna X ikonki"/>
    <col name="IconY" type="int" caption="Y"
			description="Współrzędna Y ikonki"/>
    <col name="Icon" type="binary" caption="Ikona" modifier="internal"
			description="Binarna informacja o wyglądzie ikony."/>
    <!-- enovaNet -->
    <col name="VisibleInNet" type="boolean" caption="Widoczny w enovaNet" description="Czy załącznik jest widoczny z poziomu enovaNet" category="enovaNet"/>
    <!-- Mateusz - task 11132 - 7.9 -->
    <col name="Lp" type="int" batchfield="false" caption="Lp." description="Kolejność wyświetlania załącznika na liście." />
    <col name="SubType" type="SubTypeType" caption="Podtyp załącznika" description="Określa typ danego załącznika." />
    <!-- RobertS 8.0 -->
    <col name="MimeType" type="string" length="100" caption="Typ MIME" description="Identyfikator formatu pliku publikowanego w internecie (Content-Type)." />

    <col name="LockTime" type="datetime" caption="Czas zablokowania załącznika" description="Czas zablokowania załącznika." readonly="set" />
    <col name="LockOperator" type="Operator" caption="Operator blokujący załącznik" description="Operator blokujący załącznik." readonly="set" />
    <col name="OcrData" type="text" caption="Dane pochądzące z silnika OCR" description="Kolumna zawiera opcjonalne dane pochądzące z silnika OCR." category="OCR" />
    <col name="OcrDataWithLayout" type="text" caption="Dane pochądzące z silnika OCR" description="Kolumna zawiera opcjonalne dane pochądzące z silnika OCR (dane te powinny zawierać opis szczegółowy położenia tekstu na obrazku/PDF)." category="OCR" />
    <col name="IsFilePathSource" type="boolean" caption="Źródło ścieżki" description="Kolumna zawiera informację czy ścieżka do plików znajdujących się na dysku jest budowana z użyciem pola Folder" category="Dms" readonly="set"/>
    <col name="Folder" type="IAttachmentFolder" caption="Folder" description="Kolumna zawiera opcjonalny element określający folder" category="Dms"/>
    
  </table>

  <!-- ====================================================================================== -->
  <!-- Databases -->
  <interface name="IDBItemClient"/>
  
  <table name="DBItem" tablename="DBItems" caption="Baza danych" tablecaption="Bazy danych" guided="Root" config="true">
    <interface>IRightsSource</interface>
    <key name="ByName" keyprimary="true" keyunique="true">
      <keycol name="Name"/>
    </key>
    <key name="ByFirmName" keyunique="true">
      <keycol name="FirmName"/>
    </key>
    <col name="Name" type="string" length="80" required="true" caption="Nazwa" description="Nazwa bazy danych" />
    <col name="FirmName" type="string" length="80" required="true" caption="Nazwa firmy" description="Nazwa firmy" />
    <col name="Client" type="IDBItemClient" caption="Klient" description="Klient powiązany z bazą danych" relname="DBItem client" children="DBItems"/>
  </table>

  <table name="DBGroup" tablename="DBGroups" caption="Grupa baz danych" tablecaption="Grupy baz danych" guided="Root" config="true">
    <key name="ByName" keyprimary="true" keyunique="true">
      <keycol name="Name"/>
    </key>
    <col name="Name" type="string" length="80" required="true" caption="Nazwa" description="Nazwa grupy baz danych" />
  </table>

  <table name="DBGroupItem" tablename="DBGroupItems" caption="Pozycja grupy bazy danych" tablecaption="Pozycje grupy bazy danych" config="true">
    <col name="DBItem" type="DBItem" required="true" readonly="true" caption="Baza danych" description="Bazy danych"
				 children="DBGroupItems" delete="cascade"/>
    <col name="DBGroup" type="DBGroup" required="true" readonly="true" caption="Grupa bazy danych" description="Grupa bazy danych"
				 children="DBGroupItems" keyunique="true" keyprimary="true" delete="cascade">
      <keycol name="DBItem"/>
    </col>
  </table>

  <!--[11383][7.9][CRM 7.9]: Wizardy Etap 2-->

  <enum name="WizardAlgorithm"/>

  <table name="WizardDefinition" tablename="WizardDefs" caption="Definicja kreatora" tablecaption="Definicje kreatorów" guided="Root" config="true" namespace="Soneta.Business.Db.Wizard">

    <key name="ByNameAndParentType" keyprimary="true" keyunique="true">
      <keycol name="ParentType"/>
      <keycol name="Name"/>
    </key>

    <key name="ByParentType">
      <keycol name="ParentType"/>
    </key>

    <key name="ByLp">
      <keycol name="Lp"/>
    </key>

    <col name="Name" type="string" length="80" required="true" description="Nazwa definicji" caption="Nazwa" />
    <col name="Description" type="string" length="200" category="Ogólne" caption="Opis" description="Opis definicji"/>
    <col name="Locked" type="boolean" category="Ogólne" caption="Zablokowana" description="Czy definicja zablokowana"/>
    <col name="ParentType" type="string" length="100" category="Ogólne" caption="Typ obiektu kreatora" description="Określa typ obiektu kreatora" required="true" readonly="true" />
    <col name="Algorithm" type="WizardAlgorithm" category="Algorytm" caption="Algorytm"  description="Algorytm kalkulatora kroków kreatora"/>
    <col name="Code" type="text" category="Algorytm" caption="Kod algorytmu" description="Kod algorytmu kalkulatora kreatora"/>

    <!--[11584][8.0][CRM 8.0]: Kreatory - dodać LP na kreatorze-->
    <col name="Lp" type="int" batchfield="false" category="Ogólne" caption="Lp." description="Liczba porządkowa kreatora" required="true" />
  </table>

  <enum name="WizardStepType"/>
  <enum name="WizardStepOperatorType"/>

  <table name="WizardStepDefinition" tablename="WizardStepDefs" caption="Definicja kroku kreatora" tablecaption="Definicje kroków kreatorów" guided="Root" namespace="Soneta.Business.Db.Wizard">

    <key name="ByLpAndWizardDefinition">
      <keycol name="Lp"/>
      <keycol name="WizardDefinition"/>
    </key>

    <key name="ByName">
      <keycol name="Name"/>
    </key>

    <col name="Name" type="string" length="80" required="true" description="Nazwa kroku kreatora" caption="Nazwa" />
    <col name="Lp" type="int" batchfield="false" category="Ogólne" caption="Lp." description="Liczba porządkowa kroku kreatora" required="true"/>
    <col name="Description" type="string" length="200" category="Ogólne" caption="Opis" description="Opis kroku kreatora"/>
    <col name="Locked" type="boolean" category="Ogólne" caption="Zablokowany" description="Czy krok kreatora zablokowany"/>
    <col name="DescriptionText" type="text" category="Ogólne" caption="Opis" description="Opis kroku kreatora"/>

    <col name="WizardDefinition"
         type="WizardDefinition"
         category="Definicja"
         required="true"
         relname="Steps"
         description="Definicja kreatora powiązana z krokiem"
         relguided="inner"
         delete="cascade"
         children="Steps"
         relright="false"
         keyclass="Lp"
         keyclasscol="Lp"
         keyunique="true"
         keyprimary="true"
		/>

    <col name="StepType" type="WizardStepType" category="Zakładki" caption="Typ"  description="Typ kroku kreatora"/>
    <col name="Page" type="string" length="255" category="Zakładki" caption="Standardowa zakładka" description="Określa typ zakładki opisującej krok">
      <verifier name="WizardStepDefinition.PageVerifier" onadded="true" />
    </col>
    <col name="PageDesc" type="string" length="100" category="Zakładki" caption="Dodatkowy opis standardowej zakładki" description="Określa dodatkowy opis standardowej zakładki"/>
    <col name="DefinedPageXML" type="text" category="Zakładki" caption="Zakładka użytkownika" description="Określa typ zakładki definiowanej przez użytkownika opisującej krok (XML)"/>
    <col name="Report" type="string" length="255" category="Zakładki" caption="Raportowa zakładka" description="Określa typ zakładki raportującej opisującej krok"/>
    <col name="Collection" type="string" length="100" category="Zakładki" caption="Kolekcja zakładek" description="Określa typ zakładki przechowującej kolekcję zakładek opisujących krok"/>
    <col name="Code" type="text" category="Algorytm" caption="Kod algorytmu" description="Kod algorytmu kalkulatora kroku kreatora"/>

    <!--[11516][7.9][CRM 7.9]: Wizardy etap 2b-->
    <col name="Save" type="boolean" category="Ogólne" caption="Zapis po kroku" description="Czy krok kreatora umożliwia zapis sesji"/>
    <col name="ParentType" type="string" length="100" category="Ogólne" caption="Typ obiektu kroku kreatora" description="Określa typ obiektu kroku kreatora" />

    <!--[12892][8.2][CRM 8.2]: Wykonujacy na wizard step-->
    <col name="OperatorType" type="WizardStepOperatorType" category="Operator" caption="Typ operatora" description="Typ operatora wykonującego"/>
    <col name="Operator" type="Operator" category="Operator" caption="Operator" description="Operator, który może wykonać krok" />
    <col name="RoleGuid" type="guid" category="Operator" caption="Rola" description="Rola, która może wykonać krok" />

    <!--[15036][9.1][Workflow 9.1]: Umożliwić ustawienie całego kroku kreatora w tryb tylko do odczytu-->
    <col name="IsReadOnlyStep" type="boolean" category="Ogólne" caption="Krok tylko do odczytu" description="Czy krok kreatora ma być ustawiony jako tylko do odczytu"/>

    <!--[16168][9.3][Workflow 9.3]: Możliwość wyciągnicia na zakładkę Workerów-->
    <col name="WorkersTypes" type="text" category="Czynności" caption="Typy czynności dla kroku" description="Typy czynności jakie zostały zarejestrowane dla kroku"/>

    <!--[16167][9.3][Workflow 9.3]: Zakładka kreatora typu RichEdit - RichDescriprion-->
    <col name="RichEditStepInfo" type="text" category="Zakładki" caption="Opis kroku" description="Określa opis (informację) na kroku typu RichEdit">
      <attribute>ControlEdit(ControlEditKind.ASPX)</attribute>
    </col>

    <!--[26015][10.5][Workflow 10.5]: Dodać pole na kroku kreatora " Podglad załaczników"-->
    <col name="ShowPdfPreview" type="boolean" category="Ogólne" caption="Pokaż podgląd załączników PDF" description="Czy krok kreatora umożliwia wyświetlenie podglądu załączników PDF"/>

  </table>

  <!-- Runtime fields -->

  <enum name="RuntimeRowRequired"/>
  <enum name="RuntimeRowReadOnly"/>
  <enum name="RuntimeFieldType"/>
  <enum name="RuntimeRowType"/>
  <interface name="IRuntimeRowDefinition"/>

  <subrow name="RuntimeRowDefinitionTools">
    <col name="Code" type="text"/>
  </subrow>

  <table name="RuntimeFieldDefinition" tablename="RuntimeFieldDefs" config="true"
         caption="Definicja pola dynamicznego" tablecaption="Definicje pól dynamicznych" namespace="Soneta.Business.Runtime"
    >
    <key name="ByName" keyunique="true" keyprimary="true">
      <keycol name="Definition"/>
      <keycol name="Name"/>
    </key>
    <key name="ByNameOnly">
      <keycol name="Name"/>
    </key>
    <col name="Type" type="RuntimeRowType" selector="true" readonly="true" required="true"
         category="System"/>
    <col name="Definition" type="IRuntimeRowDefinition" required="true" readonly="true"
        children="Fields" relguided="inner" delete="cascade" keyclass="Lp"	keyclasscol="Lp" relname="Definicje pól dynamicznych"
        category="Ogólne" caption="Definicja" description="Definicja zdarzenia"/>
    <col name="Lp" type="int" batchfield="false"
	    category="Ogólne" description="Liczba porządkowa pola w definicji"/>
    <col name="Name" type="string" length="30" required="true" important="true"
        category="Ogólne" caption="Nazwa" description="Nazwa pola">
      <verifier name="RuntimeFieldDefinition.IdentifierNameVerifier" onadded="false"/>
    </col>
    <col name="FieldType" type="RuntimeFieldType" important="true"
        category="Value" caption="Typ" description="Typ pola">
      <verifier name="RuntimeFieldDefinition.TypeRequiredVerifier" />
    </col>
    <col name="TypeInformation" type="string" length="100" important="true" modifier="public" readonly="set"
        category="Value" caption="Informacja" description="Informacja dodatkowa dla typu pola">
      <verifier name="RuntimeFieldDefinition.TypeRequiredVerifier" />
    </col>
    <col name="FldCaption" type="string" length="30"
        category="Value" caption="Etykieta" description="Domyślna etykieta"/>
    <col name="FldDescription" type="string" length="60"
        category="Value" caption="Opis" description="Opis pola"/>
    <col name="IsFieldIndexed" type="boolean"
         category="Ogólne" caption="Pole indeksowane" description="Określa czy pole jest indeksowane">
      <verifier name="RuntimeFieldDefinition.FieldIndexedVerifier" onadded="true"/>
    </col>
    <col name="FldRequired" type="RuntimeRowRequired"/>
    <col name="FldReadOnly" type="RuntimeRowReadOnly"/>
    <col name="FldMaxLen" type="int"/>
    <col name="FldSetOnlyNull" type="boolean"/>
  </table>

  <subrow name="RuntimeFields">
    <col name="Code" type="text" modifier="internal"/>
  </subrow>

  <interface name="IRuntimeRow" />

  <table name="RuntimeRowRelation" tablename="RuntimeRowRels" caption="Relacja wiersza runtime" tablecaption="Relacje wierszy runtime" namespace="Soneta.Business.Runtime">
    
    <col name="RuntimeRowHost"
         type="IRuntimeRow" 
         required="true" 
         readonly="true" 
         keyprimary="true"
         children="Relations" 
         delete="cascade"
         category="Ogólne"
         caption="Wiersz runtime"
         description="Wiersz runtime">
      <keycol name="Definition"/>
    </col>
    
    <col name="Host" type="IGuidedRow" required="true" category="Ogólne" caption="Rekord powiązany" description="Rekord powiązany">
      <keycol name="Primary"/>
    </col>
    
    <col name="Definition" type="RuntimeFieldDefinition" required="true" readonly="true" category="Ogólne" caption="Definicja" description="Definicja pola dokumentu"/>
    <col name="Primary" type="boolean" readonly="true" category="Ogólne" caption="Podstawowa" description="Relacja podstawowa"/>
  
  </table>

  <interface name="IAuthorised"/>
  <interface name="IPermissionClient"/>
  <enum name="AccessRights"/>
  
  <table name="RecordPermission" tablename="RecordPerms" tablecaption="Prawa rekordów" caption="Prawo rekordu" namespace="Soneta.Business.Db.Permissions">

    <key name="ByPermissionClientAndAuthorised" keyprimary="true" keyunique="true">
      <keycol name="PermissionClient"/>
      <keycol name="Authorised"/>
    </key>

    <col name="PermissionClient"
         type="IPermissionClient"
         required="true"
         category="Ogólne"
         caption="Klient uprawnienia"
         description="Określa klienta uprawnienia"
         children="Permissions"
         relname="Permission client permissions"
         delete="cascade"/>

    <col name="Authorised"
         type="IAuthorised"
         required="true"
         category="Ogólne"
         caption="Uprawniony"
         description="Określa upawnionego"
         children="Permissions"
         relname="Authorised permissions"
         delete="cascade"/>
    
    <col name="Permission" type="AccessRights" category="Ogólne" caption="Uprawnienie" description="Określa rodzaj uprawnienia"/>

  </table>

  <table name="UserGroup" tablename="UserGroups" caption="Grupa użytkowników" tablecaption="Grupy użytkowników" config="true" namespace="Soneta.Business.Db.Permissions">

    <interface>IAuthorised</interface>

    <key name="ByName" keyprimary="true" keyunique="true">
      <keycol name="Name"/>
    </key>
    
    <col name="Name" type="string" length="255" required="true" category="Ogólne" caption="Nazwa" description="Określa nazwę grupy użytkowników"/>
    <col name="Locked" type="boolean" category="Ogólne" caption="Zablokowana" description="Określa czy grupa użytkowników jest zablokowana"/>  

  </table>
  
  <table name="UserGroupMember" tablename="UserGroupMembers" caption="Członek grupy użytkowników" tablecaption="Członkowie grupy użytkowników" config="true" namespace="Soneta.Business.Db.Permissions">

    <key name="ByUserGroupAndMember" keyprimary="true" keyunique="true">
      <keycol name="UserGroup"/>
      <keycol name="Member"/>
    </key>

    <col name="UserGroup"
         type="UserGroup"
         required="true"
         category="Ogólne"
         caption="Grupa użytkowników"
         description="Określa grupę użytkowników"
         children="Members"
         relname="User group members"/>

    <col name="Member"
         type="IAuthorised"
         required="true"
         category="Ogólne"
         caption="Członek"
         description="Określa członka grupy użytkowników"
         children="UserGroupMembers"
         relname="Member members"/>
    
    <col name="Locked" type="boolean" category="Ogólne" caption="Zablokowany" description="Określa czy członek grupy użytkowników jest zablokowany"/> 

  </table>

</module>
